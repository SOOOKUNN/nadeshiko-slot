<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ãªã§ã—ã“v1ã‚¹ãƒ­ãƒƒãƒˆã‚²ãƒ¼ãƒ ã®Webç‰ˆã€‚å£ç´™ã¨ã—ã¦ã‚‚æ¥½ã—ã‚ã‚‹ã‚«ã‚¸ãƒã‚¹ãƒ­ãƒƒãƒˆã‚²ãƒ¼ãƒ ">
    <meta name="keywords" content="ã‚¹ãƒ­ãƒƒãƒˆ,ã‚²ãƒ¼ãƒ ,ãªã§ã—ã“,å£ç´™,KAZINO">
    <meta name="author" content="Nadeshiko Slot Game">
    <meta property="og:title" content="KAZINO - ãªã§ã—ã“ã‚¹ãƒ­ãƒƒãƒˆã‚²ãƒ¼ãƒ ">
    <meta property="og:description" content="ãªã§ã—ã“v1ã§ä½œã‚‰ã‚ŒãŸã‚¹ãƒ­ãƒƒãƒˆã‚²ãƒ¼ãƒ ã®Webç‰ˆ">
    <meta property="og:type" content="website">
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ°</text></svg>">
    <title>KAZINO - ãªã§ã—ã“ã‚¹ãƒ­ãƒƒãƒˆã‚²ãƒ¼ãƒ </title>
    <style>
        *{margin:0;padding:0;box-sizing:border-box}
        body{width:100vw;height:100vh;background:linear-gradient(135deg,#1a1a2e 0%,#16213e 50%,#0f3460 100%);font-family:'MS Gothic','Courier New',monospace;overflow:hidden;position:relative;display:flex;align-items:center;justify-content:center}
        @keyframes gradient{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}
        body::before{content:'';position:absolute;top:0;left:0;right:0;bottom:0;background:linear-gradient(45deg,transparent 30%,rgba(255,215,0,0.05)50%,transparent 70%);background-size:200% 200%;animation:gradient 15s ease infinite;pointer-events:none}
        .container{width:min(1400px,95vw);height:min(900px,95vh);display:grid;grid-template-columns:1fr 400px;grid-template-rows:auto 1fr auto;gap:20px;padding:30px;background:rgba(255,255,255,0.98);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.5);backdrop-filter:blur(10px)}
        .header{grid-column:1/-1;text-align:center}
        .title{font-size:3.5em;font-weight:bold;color:#1a1a2e;text-shadow:3px 3px 6px rgba(0,0,0,0.2);margin-bottom:10px}
        .money-display{display:inline-block;padding:20px 60px;background:linear-gradient(145deg,#ffd700,#ffed4e);border:4px solid #b8860b;border-radius:15px;font-size:2.5em;font-weight:bold;color:#1a1a2e;box-shadow:0 8px 20px rgba(255,215,0,0.4);margin-top:10px}
        .game-area{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:30px;background:linear-gradient(145deg,#f8f9fa,#e9ecef);border-radius:15px;padding:40px;box-shadow:inset 0 4px 10px rgba(0,0,0,0.1)}
        .slots-container{display:flex;gap:30px;justify-content:center}
        .slot{width:180px;height:180px;font-size:120px;border:5px solid #000;border-radius:20px;text-align:center;line-height:180px;background:linear-gradient(145deg,#fff,#f0f0f0);box-shadow:inset 0 6px 15px rgba(0,0,0,0.15),0 8px 20px rgba(0,0,0,0.3);color:#000;font-weight:bold;will-change:transform}
        .slot.spinning{animation:slotSpin 0.1s infinite}
        @keyframes slotSpin{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}
        .entry-fee-display{padding:15px 40px;background:linear-gradient(145deg,#fff3cd,#ffe69c);border:3px solid #ffc107;border-radius:10px;font-size:1.5em;font-weight:bold;color:#856404;box-shadow:0 4px 10px rgba(0,0,0,0.15)}
        .controls{display:flex;gap:20px;margin-top:10px}
        .btn-spin{padding:30px 80px;font-size:3em;background:linear-gradient(145deg,#28a745,#34ce57);border:5px outset #1e7e34;border-radius:15px;cursor:pointer;font-family:inherit;font-weight:bold;color:#fff;box-shadow:0 10px 25px rgba(40,167,69,0.4);transition:transform 0.2s,box-shadow 0.2s;text-shadow:2px 2px 4px rgba(0,0,0,0.3)}
        .btn-spin:hover{transform:translateY(-5px);box-shadow:0 15px 35px rgba(40,167,69,0.6)}
        .btn-spin:active{border-style:inset;transform:translateY(0)}
        .btn-777{padding:20px 40px;font-size:1.3em;background:linear-gradient(145deg,#ff6b6b,#ee5a6f);border:4px outset #c92a2a;border-radius:10px;cursor:pointer;font-family:inherit;font-weight:bold;color:#fff;box-shadow:0 6px 15px rgba(255,107,107,0.4);transition:transform 0.2s,box-shadow 0.2s}
        .btn-777:hover{transform:translateY(-3px);box-shadow:0 8px 20px rgba(255,107,107,0.6)}
        .btn-777:active{border-style:inset;transform:translateY(0)}
        .sidebar{background:linear-gradient(145deg,#fff,#f8f9fa);border:3px solid #dee2e6;border-radius:15px;padding:25px;overflow-y:auto;box-shadow:0 4px 15px rgba(0,0,0,0.1)}
        .sidebar h2{font-size:1.8em;color:#1a1a2e;margin-bottom:15px;border-bottom:3px solid #ffd700;padding-bottom:10px}
        .sidebar-content{font-size:1.1em;line-height:1.8;color:#2c3e50}
        .sidebar-content h3{color:#0f3460;margin-top:20px;margin-bottom:10px;font-size:1.3em}
        .sidebar-content ul{margin-left:20px;margin-bottom:15px}
        .sidebar-content li{margin-bottom:8px}
        .sidebar::-webkit-scrollbar{width:10px}
        .sidebar::-webkit-scrollbar-thumb{background:#adb5bd;border-radius:5px}
        .footer{grid-column:1/-1;text-align:center;padding:15px;background:linear-gradient(145deg,#e9ecef,#dee2e6);border-radius:10px;font-size:0.95em;color:#495057}
        .sound-toggle,.bgm-toggle{position:absolute;top:20px;padding:10px 20px;border:2px solid;border-radius:8px;cursor:pointer;font-size:1.1em;font-weight:bold;color:#fff;box-shadow:0 4px 10px rgba(0,0,0,0.2);transition:transform 0.2s,box-shadow 0.2s}
        .sound-toggle{right:180px;background:linear-gradient(145deg,#6c757d,#5a6268);border-color:#495057}
        .bgm-toggle{right:20px;background:linear-gradient(145deg,#17a2b8,#138496);border-color:#117a8b}
        .sound-toggle:hover,.bgm-toggle:hover{transform:translateY(-2px);box-shadow:0 6px 15px rgba(0,0,0,0.3)}
        .sound-toggle.muted,.bgm-toggle.muted{background:linear-gradient(145deg,#dc3545,#c82333);border-color:#bd2130}
        #popup{position:fixed;font-size:3.5em;font-weight:bold;pointer-events:none;white-space:nowrap;transform:translateZ(0);z-index:10000;padding:20px 50px;border-radius:20px;border:5px solid transparent;background:transparent;opacity:0;display:none;transition:opacity 0.5s}
        @keyframes popupBounce{0%{transform:scale(0.5)translateY(-20px);opacity:0}50%{transform:scale(1.1)translateY(0)}100%{transform:scale(1)translateY(0);opacity:1}}
        @keyframes popupBigWin{0%{transform:scale(0.3)rotate(-10deg);opacity:0}50%{transform:scale(1.2)rotate(5deg)}70%{transform:scale(0.95)rotate(-2deg)}100%{transform:scale(1)rotate(0);opacity:1}}
        #popup.positive,#popup.negative,#popup.bigwin{display:block;opacity:1;box-shadow:0 10px 40px rgba(0,0,0,0.4),inset 0 2px 10px rgba(255,255,255,0.8),inset 0 -2px 10px rgba(0,0,0,0.1);backdrop-filter:blur(10px)}
        #popup.positive{border-color:#28a745;background:linear-gradient(145deg,rgba(144,238,144,0.95),rgba(152,251,152,0.95));text-shadow:2px 2px 4px rgba(0,100,0,0.3);color:#155724}
        #popup.negative{border-color:#dc3545;background:linear-gradient(145deg,rgba(255,182,193,0.95),rgba(255,192,203,0.95));text-shadow:2px 2px 4px rgba(139,0,0,0.3);color:#721c24}
        #popup.bigwin{border-color:#ffd700;background:linear-gradient(145deg,rgba(255,215,0,0.95),rgba(255,237,78,0.95));text-shadow:3px 3px 6px rgba(184,134,11,0.5);color:#1a1a2e;animation:popupBigWin 0.6s ease-out;box-shadow:0 15px 50px rgba(255,215,0,0.6),inset 0 2px 15px rgba(255,255,255,0.9),inset 0 -2px 15px rgba(0,0,0,0.2)}
        #loading{position:fixed;top:0;left:0;width:100%;height:100%;background:#1a1a2e;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:9999;transition:opacity 0.5s}
        #loading.hidden{opacity:0;pointer-events:none}
        .loader{font-size:100px;animation:spin 1s linear infinite}
        @keyframes spin{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}
        .loading-text{color:#ffd700;font-size:28px;margin-top:20px}
        @media(max-width:1200px){.container{grid-template-columns:1fr;grid-template-rows:auto auto 1fr auto}.sidebar{grid-row:3}}
        @media(max-width:768px){.container{padding:15px}.title{font-size:2em}.slot{width:100px;height:100px;font-size:70px;line-height:100px}.btn-spin{font-size:2em;padding:20px 40px}}
    </style>
</head>
<body>
    <div id="loading">
        <div class="loader">ğŸ°</div>
        <div class="loading-text">Loading KAZINO...</div>
    </div>

    <button class="sound-toggle" id="soundToggle">ğŸ”Š åŠ¹æœéŸ³ON</button>
    <button class="bgm-toggle" id="bgmToggle">ğŸµ BGM ON</button>

    <div class="container">
        <div class="header">
            <h1 class="title">ğŸ° KAZINO ğŸ°</h1>
            <div class="money-display" id="money-panel">ğŸ’° 100,000å††</div>
        </div>

        <div class="game-area">
            <div class="slots-container">
                <div class="slot" id="slot0">7</div>
                <div class="slot" id="slot1">7</div>
                <div class="slot" id="slot2">7</div>
            </div>
            
            <div class="entry-fee-display" id="entry-fee">å‚åŠ æ–™ï¼š10,000å††</div>
            
            <div class="controls">
                <button class="btn-spin" id="btn-spin">æŠ¼ã›!!</button>
            </div>
            
            <button class="btn-777" id="btn-777">ğŸ° 777ç¢ºå®šãƒœã‚¿ãƒ³</button>
        </div>

        <div class="sidebar">
            <h2>ğŸ“‹ ã‚²ãƒ¼ãƒ èª¬æ˜</h2>
            <div class="sidebar-content">
                <h3>ğŸ’³ å‚åŠ æ–™ãƒ¬ãƒ™ãƒ«</h3>
                <ul>
                    <li><strong>Lv1:</strong> æ‰€æŒé‡‘10ä¸‡æœªæº€ â†’ 1,000å††</li>
                    <li><strong>Lv2:</strong> æ‰€æŒé‡‘10ä¸‡ä»¥ä¸Š â†’ 10,000å††</li>
                    <li><strong>Lv3:</strong> æ‰€æŒé‡‘1000ä¸‡ä»¥ä¸Š â†’ 100ä¸‡å††</li>
                    <li><strong>Lv4:</strong> æ‰€æŒé‡‘1å„„ä»¥ä¸Š â†’ 1000ä¸‡å††</li>
                </ul>

                <h3>ğŸ é…å½“</h3>
                <ul>
                    <li><strong>å¤§å½“ãŸã‚Šï¼ˆ3ã¤æƒã„ï¼‰:</strong><br>
                    æ•°å­—Ã—æ‰€æŒé‡‘<br>
                    â€»1ã®å ´åˆã¯10ä¸‡å††å›ºå®š</li>
                    <li><strong>å½“ãŸã‚Šï¼ˆ2ã¤æƒã„ï¼‰:</strong><br>
                    200å††ï½4,000å††</li>
                    <li><strong>ãƒã‚ºãƒ¬:</strong><br>
                    0å††ï½2,000å††</li>
                </ul>

                <h3>ğŸ® æ“ä½œæ–¹æ³•</h3>
                <ul>
                    <li>ã€ŒæŠ¼ã›!!ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯</li>
                    <li>ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§ã‚¹ãƒ”ãƒ³</li>
                    <li>777ç¢ºå®šãƒœã‚¿ãƒ³ã§å¿…ãš777</li>
                </ul>

                <h3>ğŸ’¡ ç‰¹å…¸</h3>
                <ul>
                    <li>æ‰€æŒé‡‘1000ä¸‡ä»¥ä¸Šã§é…å½“7å€ï¼</li>
                </ul>
            </div>
        </div>

        <div class="footer">
            <p>Nadeshiko v1 Slot Game - Web Version | ã‚¹ãƒšãƒ¼ã‚¹ã‚­ãƒ¼ã§ã‚‚ãƒ—ãƒ¬ã‚¤å¯èƒ½</p>
        </div>
    </div>

    <div id="popup"></div>

    <script>
        'use strict';
        
        // å®šæ•°å®šç¾©
        const PRIZES=[0,200,500,1000,1500,2000,3000,4000];
        const CHORD_PROGRESSION=[[261.63,311.13,392],[349.23,415.3,523.25],[392,493.88,587.33],[261.63,311.13,392]];
        const COLORS=['#ff0000','#0000ff','#ffff00','#000000'];
        
        // çŠ¶æ…‹ç®¡ç†
        let M=100000,isSpinning=false,soundEnabled=true,bgmEnabled=true;
        let bgmOscillators=[],bgmGainNode=null,bgmPlaying=false;
        const audioContext=new(window.AudioContext||window.webkitAudioContext)();
        
        // DOMè¦ç´ ã‚­ãƒ£ãƒƒã‚·ãƒ¥
        const el={
            moneyPanel:document.getElementById('money-panel'),
            slots:[0,1,2].map(i=>document.getElementById('slot'+i)),
            entryFee:document.getElementById('entry-fee'),
            btnSpin:document.getElementById('btn-spin'),
            btn777:document.getElementById('btn-777'),
            popup:document.getElementById('popup'),
            loading:document.getElementById('loading'),
            soundToggle:document.getElementById('soundToggle'),
            bgmToggle:document.getElementById('bgmToggle')
        };
        
        // ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
        const sleep=ms=>new Promise(r=>setTimeout(r,ms));
        const random=max=>(Math.random()*max|0)+1;
        const formatMoney=n=>'ğŸ’° '+n.toLocaleString()+'å††';
        const getEntryFee=()=>M>99999999?10000000:M>9999999?1000000:M>99999?10000:1000;
        
        // BGMåˆ¶å¾¡
        function startBGM(){
            if(bgmPlaying||!bgmEnabled)return;
            bgmPlaying=true;
            bgmGainNode=audioContext.createGain();
            bgmGainNode.gain.value=0.08;
            bgmGainNode.connect(audioContext.destination);
            
            let chordIndex=0,beatCount=0;
            function playChord(){
                if(!bgmPlaying||!bgmEnabled){stopBGM();return}
                bgmOscillators.forEach(o=>{try{o.stop()}catch(e){}});
                bgmOscillators=[];
                
                const chord=CHORD_PROGRESSION[chordIndex];
                chord.forEach((freq,i)=>{
                    const osc=audioContext.createOscillator();
                    const gain=audioContext.createGain();
                    osc.type='sine';
                    osc.frequency.value=freq;
                    gain.gain.value=0.15-i*0.02;
                    osc.connect(gain);
                    gain.connect(bgmGainNode);
                    osc.start();
                    bgmOscillators.push(osc);
                });
                
                const bass=audioContext.createOscillator();
                const bassGain=audioContext.createGain();
                bass.type='triangle';
                bass.frequency.value=chord[0]/2;
                bassGain.gain.value=0.12;
                bass.connect(bassGain);
                bassGain.connect(bgmGainNode);
                bass.start();
                bgmOscillators.push(bass);
                
                beatCount++;
                if(beatCount>=8){beatCount=0;chordIndex=(chordIndex+1)%CHORD_PROGRESSION.length}
                setTimeout(playChord,600);
            }
            playChord();
        }
        
        function stopBGM(){
            bgmPlaying=false;
            bgmOscillators.forEach(o=>{try{o.stop()}catch(e){}});
            bgmOscillators=[];
            if(bgmGainNode){bgmGainNode.disconnect();bgmGainNode=null}
        }
        
        // åŠ¹æœéŸ³
        function playSound(type){
            if(!soundEnabled)return;
            const osc=audioContext.createOscillator();
            const gain=audioContext.createGain();
            osc.connect(gain);
            gain.connect(audioContext.destination);
            
            switch(type){
                case'spin':osc.frequency.value=400;osc.type='square';gain.gain.setValueAtTime(0.1,audioContext.currentTime);gain.gain.exponentialRampToValueAtTime(0.01,audioContext.currentTime+0.1);osc.start();osc.stop(audioContext.currentTime+0.1);break;
                case'stop':osc.frequency.value=600;osc.type='sine';gain.gain.setValueAtTime(0.15,audioContext.currentTime);gain.gain.exponentialRampToValueAtTime(0.01,audioContext.currentTime+0.15);osc.start();osc.stop(audioContext.currentTime+0.15);break;
                case'coin':osc.frequency.value=800;osc.type='sine';gain.gain.setValueAtTime(0.1,audioContext.currentTime);gain.gain.exponentialRampToValueAtTime(0.01,audioContext.currentTime+0.2);osc.start();osc.stop(audioContext.currentTime+0.2);break;
                case'win':[523.25,659.25,783.99,1046.5].forEach((f,i)=>{const o=audioContext.createOscillator(),g=audioContext.createGain();o.connect(g);g.connect(audioContext.destination);o.frequency.value=f;o.type='sine';g.gain.setValueAtTime(0.2,audioContext.currentTime+i*0.1);g.gain.exponentialRampToValueAtTime(0.01,audioContext.currentTime+i*0.1+0.3);o.start(audioContext.currentTime+i*0.1);o.stop(audioContext.currentTime+i*0.1+0.3)});break;
                case'bigwin':for(let i=0;i<8;i++){const o=audioContext.createOscillator(),g=audioContext.createGain();o.connect(g);g.connect(audioContext.destination);o.frequency.value=440*Math.pow(2,i/12);o.type='sine';g.gain.setValueAtTime(0.15,audioContext.currentTime+i*0.08);g.gain.exponentialRampToValueAtTime(0.01,audioContext.currentTime+i*0.08+0.4);o.start(audioContext.currentTime+i*0.08);o.stop(audioContext.currentTime+i*0.08+0.4)}break;
            }
        }
        
        // ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—
        async function showPopup(text,type,x,y,duration=40){
            el.popup.className=type;
            el.popup.textContent=text;
            el.popup.style.display='block';
            el.popup.style.opacity='1';
            el.popup.style.left=(x-200)+'px';
            el.popup.style.top=y+'px';
            el.popup.style.animation=type==='bigwin'?'popupBigWin 0.6s ease-out':'popupBounce 0.5s ease-out';
            
            let frame=0;
            const animate=()=>{
                if(frame>=duration){
                    el.popup.style.opacity='0';
                    setTimeout(()=>{el.popup.textContent='';el.popup.className='';el.popup.style.display='none';el.popup.style.opacity='1';el.popup.style.animation='none'},500);
                    return;
                }
                el.popup.style.top=(y+frame*1.5)+'px';
                if(frame>duration*0.7)el.popup.style.opacity=1-(frame-duration*0.7)/(duration*0.3);
                frame++;
                requestAnimationFrame(animate);
            };
            requestAnimationFrame(animate);
            await sleep(duration*10);
        }
        
        // ã‚¹ãƒ­ãƒƒãƒˆå›è»¢
        async function spinAnimation(is777){
            let S=0,T=0,T1=0,T2=0,Text='ã‚´',TextC=0;
            el.btnSpin.style.fontSize='1.5em';
            el.slots.forEach(s=>s.classList.add('spinning'));
            
            const results=[0,0,0];
            while(S<30){
                results[0]=random(7);results[1]=random(7);results[2]=random(7);
                playSound('spin');
                
                if(S>25){
                    await sleep(T*1000);el.slots[0].textContent=results[0];playSound('stop');
                    await sleep(T1*1000);el.slots[1].textContent=results[1];playSound('stop');
                    await sleep(T2*1000);el.slots[2].textContent=results[2];playSound('stop');
                    T+=0.01;T1+=0.05;T2+=0.1;
                }else{
                    el.slots[0].textContent=results[0];
                    el.slots[1].textContent=results[1];
                    el.slots[2].textContent=results[2];
                }
                
                S++;Text+='ã‚¬â€¦';el.btnSpin.textContent=Text;TextC++;
                if(TextC>9){Text='';TextC=0}
                await sleep(25);
            }
            
            el.slots.forEach(s=>s.classList.remove('spinning'));
            if(is777){el.slots.forEach(s=>s.textContent='7');return[7,7,7]}
            return results;
        }
        
        // ç‚¹æ»…æ¼”å‡º
        async function blinkSlots(){
            for(let i=0;i<3;i++){
                for(const c of COLORS){
                    el.slots.forEach(s=>s.style.color=c);
                    await sleep(200);
                }
            }
        }
        
        // çµæœåˆ¤å®š
        async function judgeResult(a,b,c){
            let MT=0,popupType='positive';
            
            if(a===b&&b===c){
                MT=a===1?100000:M*a-M;
                popupType='bigwin';
                playSound('bigwin');
                await blinkSlots();
            }else{
                const key=a===b?a:b===c?b:a===c?a:0;
                if(key>0){
                    MT=PRIZES[key]||4000;
                    playSound('win');
                }else{
                    const p=a+b+c;
                    MT=p<=10?0:p<=27?50:p<=49?100:p<=80?200:p<=120?500:p<=180?1000:2000;
                    if(MT>0)playSound('coin');
                    else popupType='negative';
                }
            }
            
            M+=MT;
            el.moneyPanel.textContent=formatMoney(M);
            
            const centerX=window.innerWidth/2;
            const text=(MT>0?'+':'')+MT.toLocaleString()+'å††';
            await showPopup(popupType==='bigwin'?'ğŸŠ '+text+' ğŸŠ':text,popupType,centerX,popupType==='bigwin'?150:200,popupType==='bigwin'?50:40);
        }
        
        // ãƒ¡ã‚¤ãƒ³ã‚¹ãƒ”ãƒ³
        async function mainSpin(is777){
            if(isSpinning)return;
            isSpinning=true;
            
            const Mpop=getEntryFee();
            M-=Mpop;
            el.moneyPanel.textContent=formatMoney(M);
            el.entryFee.textContent='å‚åŠ æ–™ï¼š'+Mpop.toLocaleString()+'å††';
            
            playSound('coin');
            await showPopup('-'+Mpop.toLocaleString()+'å††','negative',window.innerWidth/2,50,30);
            
            const results=await spinAnimation(is777);
            await judgeResult(...results);
            
            await sleep(1000);
            el.btnSpin.style.fontSize='3em';
            el.btnSpin.textContent='æŠ¼ã›!!';
            isSpinning=false;
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆè¨­å®š
        el.soundToggle.addEventListener('click',()=>{
            soundEnabled=!soundEnabled;
            el.soundToggle.textContent=soundEnabled?'ğŸ”Š åŠ¹æœéŸ³ON':'ğŸ”‡ åŠ¹æœéŸ³OFF';
            el.soundToggle.classList.toggle('muted');
        });
        
        el.bgmToggle.addEventListener('click',()=>{
            bgmEnabled=!bgmEnabled;
            el.bgmToggle.textContent=bgmEnabled?'ğŸµ BGM ON':'ğŸ”‡ BGM OFF';
            el.bgmToggle.classList.toggle('muted');
            bgmEnabled?startBGM():stopBGM();
        });
        
        el.btnSpin.addEventListener('click',()=>{
            if(!bgmPlaying&&bgmEnabled)startBGM();
            mainSpin(false);
        });
        
        el.btn777.addEventListener('click',()=>{
            if(!bgmPlaying&&bgmEnabled)startBGM();
            mainSpin(true);
        });
        
        let keyPressed=false;
        document.addEventListener('keydown',e=>{
            if(e.code==='Space'&&!isSpinning&&!keyPressed){
                e.preventDefault();
                keyPressed=true;
                if(!bgmPlaying&&bgmEnabled)startBGM();
                mainSpin(false);
            }
        });
        
        document.addEventListener('keyup',e=>{if(e.code==='Space')keyPressed=false});
        
        // åˆæœŸåŒ–
        window.addEventListener('load',()=>{
            setTimeout(()=>{
                el.loading.classList.add('hidden');
                setTimeout(()=>{if(bgmEnabled)startBGM()},500);
            },500);
        });
        
        el.moneyPanel.textContent=formatMoney(M);
    </script>
</body>
</html>
